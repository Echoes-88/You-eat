{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\atomi\\\\Documents\\\\0-Programmation\\\\0-PROGRAMMES\\\\You-eat\\\\You-eat\\\\pages\\\\login.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { useRouter } from \"next/router\";\nimport { Container, Row, Col, Button, Form, FormGroup, Label, Input } from \"reactstrap\";\nimport { login } from \"../lib/auth\";\nimport AppContext from \"../context/AppContext\";\n\nfunction Login(props) {\n  const {\n    0: data,\n    1: updateData\n  } = useState({\n    identifier: \"\",\n    password: \"\"\n  });\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: error,\n    1: setError\n  } = useState(false);\n  const router = useRouter();\n  const appContext = useContext(AppContext);\n  const {\n    0: urlOrigin,\n    1: setUrlOrigin\n  } = useState();\n  useEffect(() => {\n    // Getting url origin to redirect after login\n    const url = window.location.search.split('restaurants%2F');\n    setUrlOrigin(url[1]);\n\n    if (appContext.isAuthenticated) {\n      router.push(\"/\"); // redirect if you're already logged in\n    }\n  }, []);\n\n  function onChange(event) {\n    updateData(_objectSpread(_objectSpread({}, data), {}, {\n      [event.target.name]: event.target.value\n    }));\n  }\n\n  return __jsx(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 5\n    }\n  }, __jsx(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }\n  }, __jsx(Col, {\n    sm: \"12\",\n    md: {\n      size: 5,\n      offset: 3\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-3246895313\" + \" \" + \"paper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-3246895313\" + \" \" + \"header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }\n  }, __jsx(\"img\", {\n    src: \"https://res.cloudinary.com/echoes88/image/upload/v1616361486/logo_big_0ffffac8a4.png\",\n    className: \"jsx-3246895313\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 15\n    }\n  })), __jsx(\"section\", {\n    className: \"jsx-3246895313\" + \" \" + \"wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }\n  }, Object.entries(error).length !== 0 && error.constructor === Object && error.message.map(error => {\n    return __jsx(\"div\", {\n      key: error.messages[0].id,\n      style: {\n        marginBottom: 10\n      },\n      className: \"jsx-3246895313\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 21\n      }\n    }, __jsx(\"small\", {\n      style: {\n        color: \"red\"\n      },\n      className: \"jsx-3246895313\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 23\n      }\n    }, error.messages[0].message));\n  }), __jsx(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 15\n    }\n  }, __jsx(\"fieldset\", {\n    disabled: loading,\n    className: \"jsx-3246895313\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }, __jsx(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 19\n    }\n  }, __jsx(Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 21\n    }\n  }, \"Email :\"), __jsx(Input, {\n    onChange: event => onChange(event),\n    name: \"identifier\",\n    style: {\n      height: 50,\n      fontSize: \"1.2em\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 21\n    }\n  })), __jsx(FormGroup, {\n    style: {\n      marginBottom: 30\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 19\n    }\n  }, __jsx(Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 21\n    }\n  }, \"Mot de passe :\"), __jsx(Input, {\n    onChange: event => onChange(event),\n    type: \"password\",\n    name: \"password\",\n    style: {\n      height: 50,\n      fontSize: \"1.2em\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 21\n    }\n  })), __jsx(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 19\n    }\n  }, __jsx(\"span\", {\n    className: \"jsx-3246895313\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 21\n    }\n  }, __jsx(\"a\", {\n    href: \"\",\n    className: \"jsx-3246895313\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 23\n    }\n  }, __jsx(\"small\", {\n    className: \"jsx-3246895313\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 25\n    }\n  }, \"Mot de passe oubli\\xE9 ?\"))), __jsx(Button, {\n    style: {\n      float: \"right\",\n      width: 120\n    },\n    color: \"primary\",\n    onClick: () => {\n      setLoading(true);\n      login(data.identifier, data.password, urlOrigin).then(res => {\n        setLoading(false); // set authed User in global context to update header/app state\n\n        appContext.setUser(res.data.user);\n      }).catch(error => {\n        setError(error.response.data);\n        setLoading(false);\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 21\n    }\n  }, loading ? \"Chargement... \" : \"Valider\")))))))), __jsx(_JSXStyle, {\n    id: \"3246895313\",\n    __self: this,\n    __source: void 0\n  }, \".paper.jsx-3246895313{border:1px solid lightgray;box-shadow:0px 1px 3px 0px rgba(0,0,0,0.2), 0px 1px 1px 0px rgba(0,0,0,0.14), 0px 2px 1px -1px rgba(0,0,0,0.12);border-radius:6px;margin-top:90px;}.notification.jsx-3246895313{color:#ab003c;}.header.jsx-3246895313{width:100%;height:3rem;background-color:#ffffff;margin-bottom:30px;border-radius-top:6px;}.header.jsx-3246895313 img.jsx-3246895313{width:50%;margin:0;margin-top:1rem;}.wrapper.jsx-3246895313{padding:10px 30px 20px 30px !important;}a.jsx-3246895313{color:blue !important;}img.jsx-3246895313{margin:15px 30px 10px 50px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXRvbWlcXERvY3VtZW50c1xcMC1Qcm9ncmFtbWF0aW9uXFwwLVBST0dSQU1NRVNcXFlvdS1lYXRcXFlvdS1lYXRcXHBhZ2VzXFxsb2dpbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFrSFMsQUFHd0MsQUFRYixBQUdILEFBT0QsQUFLNkIsQUFHakIsQUFHSyxVQVZsQixDQVBHLEdBSGQsS0FXa0IsR0FPbEIsQ0FkMkIsSUFWYSxBQTJCeEMsUUFUQSxJQUdBLFNBVnFCLG1CQUNHLHNCQUN4QixrREFab0Isa0JBQ0YsZ0JBQ2xCIiwiZmlsZSI6IkM6XFxVc2Vyc1xcYXRvbWlcXERvY3VtZW50c1xcMC1Qcm9ncmFtbWF0aW9uXFwwLVBST0dSQU1NRVNcXFlvdS1lYXRcXFlvdS1lYXRcXHBhZ2VzXFxsb2dpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VDb250ZXh0IH0gZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gXCJuZXh0L3JvdXRlclwiO1xyXG5pbXBvcnQge1xyXG4gIENvbnRhaW5lcixcclxuICBSb3csXHJcbiAgQ29sLFxyXG4gIEJ1dHRvbixcclxuICBGb3JtLFxyXG4gIEZvcm1Hcm91cCxcclxuICBMYWJlbCxcclxuICBJbnB1dCxcclxufSBmcm9tIFwicmVhY3RzdHJhcFwiO1xyXG5pbXBvcnQgeyBsb2dpbiB9IGZyb20gXCIuLi9saWIvYXV0aFwiO1xyXG5pbXBvcnQgQXBwQ29udGV4dCBmcm9tIFwiLi4vY29udGV4dC9BcHBDb250ZXh0XCI7XHJcblxyXG5mdW5jdGlvbiBMb2dpbihwcm9wcykge1xyXG4gIGNvbnN0IFtkYXRhLCB1cGRhdGVEYXRhXSA9IHVzZVN0YXRlKHsgaWRlbnRpZmllcjogXCJcIiwgcGFzc3dvcmQ6IFwiXCIgfSk7XHJcbiAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpO1xyXG4gIGNvbnN0IGFwcENvbnRleHQgPSB1c2VDb250ZXh0KEFwcENvbnRleHQpO1xyXG5cclxuICBjb25zdCBbdXJsT3JpZ2luLCBzZXRVcmxPcmlnaW5dID0gdXNlU3RhdGUoKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIC8vIEdldHRpbmcgdXJsIG9yaWdpbiB0byByZWRpcmVjdCBhZnRlciBsb2dpblxyXG4gICAgY29uc3QgdXJsID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaC5zcGxpdCgncmVzdGF1cmFudHMlMkYnKTtcclxuICAgIHNldFVybE9yaWdpbih1cmxbMV0pO1xyXG5cclxuICAgIGlmIChhcHBDb250ZXh0LmlzQXV0aGVudGljYXRlZCkge1xyXG4gICAgICByb3V0ZXIucHVzaChcIi9cIik7IC8vIHJlZGlyZWN0IGlmIHlvdSdyZSBhbHJlYWR5IGxvZ2dlZCBpblxyXG4gICAgfVxyXG4gIH0sIFtdKTtcclxuXHJcbiAgZnVuY3Rpb24gb25DaGFuZ2UoZXZlbnQpIHtcclxuICAgIHVwZGF0ZURhdGEoeyAuLi5kYXRhLCBbZXZlbnQudGFyZ2V0Lm5hbWVdOiBldmVudC50YXJnZXQudmFsdWUgfSk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPENvbnRhaW5lcj5cclxuICAgICAgPFJvdz5cclxuICAgICAgICA8Q29sIHNtPVwiMTJcIiBtZD17eyBzaXplOiA1LCBvZmZzZXQ6IDMgfX0+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhcGVyXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGVhZGVyXCI+XHJcbiAgICAgICAgICAgICAgPGltZyBzcmM9XCJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9lY2hvZXM4OC9pbWFnZS91cGxvYWQvdjE2MTYzNjE0ODYvbG9nb19iaWdfMGZmZmZhYzhhNC5wbmdcIiAvPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPHNlY3Rpb24gY2xhc3NOYW1lPVwid3JhcHBlclwiPlxyXG4gICAgICAgICAgICAgIHtPYmplY3QuZW50cmllcyhlcnJvcikubGVuZ3RoICE9PSAwICYmXHJcbiAgICAgICAgICAgICAgICBlcnJvci5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0ICYmXHJcbiAgICAgICAgICAgICAgICBlcnJvci5tZXNzYWdlLm1hcCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICBrZXk9e2Vycm9yLm1lc3NhZ2VzWzBdLmlkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luQm90dG9tOiAxMCB9fVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgIDxzbWFsbCBzdHlsZT17eyBjb2xvcjogXCJyZWRcIiB9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9yLm1lc3NhZ2VzWzBdLm1lc3NhZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L3NtYWxsPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICAgICAgPEZvcm0+XHJcbiAgICAgICAgICAgICAgICA8ZmllbGRzZXQgZGlzYWJsZWQ9e2xvYWRpbmd9PlxyXG4gICAgICAgICAgICAgICAgICA8Rm9ybUdyb3VwPlxyXG4gICAgICAgICAgICAgICAgICAgIDxMYWJlbD5FbWFpbCA6PC9MYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICA8SW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZXZlbnQpID0+IG9uQ2hhbmdlKGV2ZW50KX1cclxuICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJpZGVudGlmaWVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGhlaWdodDogNTAsIGZvbnRTaXplOiBcIjEuMmVtXCIgfX1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICA8L0Zvcm1Hcm91cD5cclxuICAgICAgICAgICAgICAgICAgPEZvcm1Hcm91cCBzdHlsZT17eyBtYXJnaW5Cb3R0b206IDMwIH19PlxyXG4gICAgICAgICAgICAgICAgICAgIDxMYWJlbD5Nb3QgZGUgcGFzc2UgOjwvTGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgPElucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGV2ZW50KSA9PiBvbkNoYW5nZShldmVudCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicGFzc3dvcmRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgbmFtZT1cInBhc3N3b3JkXCJcclxuICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGhlaWdodDogNTAsIGZvbnRTaXplOiBcIjEuMmVtXCIgfX1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICA8L0Zvcm1Hcm91cD5cclxuXHJcbiAgICAgICAgICAgICAgICAgIDxGb3JtR3JvdXA+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzbWFsbD5Nb3QgZGUgcGFzc2Ugb3VibGnDqSA/PC9zbWFsbD5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgZmxvYXQ6IFwicmlnaHRcIiwgd2lkdGg6IDEyMCB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgY29sb3I9XCJwcmltYXJ5XCJcclxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0TG9hZGluZyh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9naW4oZGF0YS5pZGVudGlmaWVyLCBkYXRhLnBhc3N3b3JkLCB1cmxPcmlnaW4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgYXV0aGVkIFVzZXIgaW4gZ2xvYmFsIGNvbnRleHQgdG8gdXBkYXRlIGhlYWRlci9hcHAgc3RhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcENvbnRleHQuc2V0VXNlcihyZXMuZGF0YS51c2VyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEVycm9yKGVycm9yLnJlc3BvbnNlLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgIHtsb2FkaW5nID8gXCJDaGFyZ2VtZW50Li4uIFwiIDogXCJWYWxpZGVyXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICAgICAgICAgIDwvRm9ybUdyb3VwPlxyXG4gICAgICAgICAgICAgICAgPC9maWVsZHNldD5cclxuICAgICAgICAgICAgICA8L0Zvcm0+XHJcbiAgICAgICAgICAgIDwvc2VjdGlvbj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvQ29sPlxyXG4gICAgICA8L1Jvdz5cclxuICAgICAgPHN0eWxlIGpzeD5cclxuICAgICAgICB7YFxyXG4gICAgICAgICAgLnBhcGVyIHtcclxuICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgbGlnaHRncmF5O1xyXG4gICAgICAgICAgICBib3gtc2hhZG93OiAwcHggMXB4IDNweCAwcHggcmdiYSgwLCAwLCAwLCAwLjIpLFxyXG4gICAgICAgICAgICAgIDBweCAxcHggMXB4IDBweCByZ2JhKDAsIDAsIDAsIDAuMTQpLFxyXG4gICAgICAgICAgICAgIDBweCAycHggMXB4IC0xcHggcmdiYSgwLCAwLCAwLCAwLjEyKTtcclxuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xyXG4gICAgICAgICAgICBtYXJnaW4tdG9wOiA5MHB4O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLm5vdGlmaWNhdGlvbiB7XHJcbiAgICAgICAgICAgIGNvbG9yOiAjYWIwMDNjO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLmhlYWRlciB7XHJcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICAgICAgICBoZWlnaHQ6IDNyZW07XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7XHJcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDMwcHg7XHJcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXMtdG9wOiA2cHg7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAuaGVhZGVyIGltZyB7XHJcbiAgICAgICAgICAgIHdpZHRoOiA1MCU7XHJcbiAgICAgICAgICAgIG1hcmdpbjogMDtcclxuICAgICAgICAgICAgbWFyZ2luLXRvcDogMXJlbTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC53cmFwcGVyIHtcclxuICAgICAgICAgICAgcGFkZGluZzogMTBweCAzMHB4IDIwcHggMzBweCAhaW1wb3J0YW50O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYSB7XHJcbiAgICAgICAgICAgIGNvbG9yOiBibHVlICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpbWcge1xyXG4gICAgICAgICAgICBtYXJnaW46IDE1cHggMzBweCAxMHB4IDUwcHg7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgYH1cclxuICAgICAgPC9zdHlsZT5cclxuICAgIDwvQ29udGFpbmVyPlxyXG4gICk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IExvZ2luOyJdfQ== */\\n/*@ sourceURL=C:\\\\\\\\Users\\\\\\\\atomi\\\\\\\\Documents\\\\\\\\0-Programmation\\\\\\\\0-PROGRAMMES\\\\\\\\You-eat\\\\\\\\You-eat\\\\\\\\pages\\\\\\\\login.js */\"));\n}\n\nexport default Login;","map":{"version":3,"sources":["C:/Users/atomi/Documents/0-Programmation/0-PROGRAMMES/You-eat/You-eat/pages/login.js"],"names":["React","useState","useEffect","useContext","useRouter","Container","Row","Col","Button","Form","FormGroup","Label","Input","login","AppContext","Login","props","data","updateData","identifier","password","loading","setLoading","error","setError","router","appContext","urlOrigin","setUrlOrigin","url","window","location","search","split","isAuthenticated","push","onChange","event","target","name","value","size","offset","Object","entries","length","constructor","message","map","messages","id","marginBottom","color","height","fontSize","float","width","then","res","setUser","user","catch","response"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\r\nimport { useRouter } from \"next/router\";\r\nimport {\r\n  Container,\r\n  Row,\r\n  Col,\r\n  Button,\r\n  Form,\r\n  FormGroup,\r\n  Label,\r\n  Input,\r\n} from \"reactstrap\";\r\nimport { login } from \"../lib/auth\";\r\nimport AppContext from \"../context/AppContext\";\r\n\r\nfunction Login(props) {\r\n  const [data, updateData] = useState({ identifier: \"\", password: \"\" });\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(false);\r\n  const router = useRouter();\r\n  const appContext = useContext(AppContext);\r\n\r\n  const [urlOrigin, setUrlOrigin] = useState();\r\n\r\n  useEffect(() => {\r\n    // Getting url origin to redirect after login\r\n    const url = window.location.search.split('restaurants%2F');\r\n    setUrlOrigin(url[1]);\r\n\r\n    if (appContext.isAuthenticated) {\r\n      router.push(\"/\"); // redirect if you're already logged in\r\n    }\r\n  }, []);\r\n\r\n  function onChange(event) {\r\n    updateData({ ...data, [event.target.name]: event.target.value });\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <Row>\r\n        <Col sm=\"12\" md={{ size: 5, offset: 3 }}>\r\n          <div className=\"paper\">\r\n            <div className=\"header\">\r\n              <img src=\"https://res.cloudinary.com/echoes88/image/upload/v1616361486/logo_big_0ffffac8a4.png\" />\r\n            </div>\r\n            <section className=\"wrapper\">\r\n              {Object.entries(error).length !== 0 &&\r\n                error.constructor === Object &&\r\n                error.message.map((error) => {\r\n                  return (\r\n                    <div\r\n                      key={error.messages[0].id}\r\n                      style={{ marginBottom: 10 }}\r\n                    >\r\n                      <small style={{ color: \"red\" }}>\r\n                        {error.messages[0].message}\r\n                      </small>\r\n                    </div>\r\n                  );\r\n                })}\r\n              <Form>\r\n                <fieldset disabled={loading}>\r\n                  <FormGroup>\r\n                    <Label>Email :</Label>\r\n                    <Input\r\n                      onChange={(event) => onChange(event)}\r\n                      name=\"identifier\"\r\n                      style={{ height: 50, fontSize: \"1.2em\" }}\r\n                    />\r\n                  </FormGroup>\r\n                  <FormGroup style={{ marginBottom: 30 }}>\r\n                    <Label>Mot de passe :</Label>\r\n                    <Input\r\n                      onChange={(event) => onChange(event)}\r\n                      type=\"password\"\r\n                      name=\"password\"\r\n                      style={{ height: 50, fontSize: \"1.2em\" }}\r\n                    />\r\n                  </FormGroup>\r\n\r\n                  <FormGroup>\r\n                    <span>\r\n                      <a href=\"\">\r\n                        <small>Mot de passe oublié ?</small>\r\n                      </a>\r\n                    </span>\r\n                    <Button\r\n                      style={{ float: \"right\", width: 120 }}\r\n                      color=\"primary\"\r\n                      onClick={() => {\r\n                        setLoading(true);\r\n                        login(data.identifier, data.password, urlOrigin)\r\n                          .then((res) => {\r\n                            setLoading(false);\r\n                            // set authed User in global context to update header/app state\r\n                            appContext.setUser(res.data.user);\r\n                          })\r\n                          .catch((error) => {\r\n                            setError(error.response.data);\r\n                            setLoading(false);\r\n                          });\r\n                      }}\r\n                    >\r\n                      {loading ? \"Chargement... \" : \"Valider\"}\r\n                    </Button>\r\n                  </FormGroup>\r\n                </fieldset>\r\n              </Form>\r\n            </section>\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n      <style jsx>\r\n        {`\r\n          .paper {\r\n            border: 1px solid lightgray;\r\n            box-shadow: 0px 1px 3px 0px rgba(0, 0, 0, 0.2),\r\n              0px 1px 1px 0px rgba(0, 0, 0, 0.14),\r\n              0px 2px 1px -1px rgba(0, 0, 0, 0.12);\r\n            border-radius: 6px;\r\n            margin-top: 90px;\r\n          }\r\n          .notification {\r\n            color: #ab003c;\r\n          }\r\n          .header {\r\n            width: 100%;\r\n            height: 3rem;\r\n            background-color: #ffffff;\r\n            margin-bottom: 30px;\r\n            border-radius-top: 6px;\r\n          }\r\n          .header img {\r\n            width: 50%;\r\n            margin: 0;\r\n            margin-top: 1rem;\r\n          }\r\n          .wrapper {\r\n            padding: 10px 30px 20px 30px !important;\r\n          }\r\n          a {\r\n            color: blue !important;\r\n          }\r\n          img {\r\n            margin: 15px 30px 10px 50px;\r\n          }\r\n        `}\r\n      </style>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}